
  <div class="btn-group">
    <%= render 'static_pages/table_partials/icon_button' %>
<%########################## Begin Dropdown ###########################################%>
    <ul class="dropdown-menu" role="menu">
<%########################## Begin level 1 dropdown ################################%>      
      <%# checking to see if $keys is nil, and if not, then put it in the dropdown button as <li> %>
      <% if !@alldonet_product_desc['wsc'][@stat_level].nil? and !@alldonet_product_desc['wsc'][@stat_level]['$keys'].nil? %>
        <% @alldonet_product_desc['wsc'][@stat_level]['$keys'].each do |key| %>
          <li class="dropdown-submenu">
            <%= content_tag :a, tabindex: "-1", href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_value", onclick: "edit_value('#{@product_key}', '#{@stat_level}.#{key}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}', '#{@alldonet_product_desc['wsc'][@stat_level][key]['$value']}', '#{key.humanize}')" do %>
              <%= key.humanize %>
            <% end %>
            <ul class="dropdown-menu">
<%################################ Begin level 2 submenu #####################%>
              <%# checking to see if $keys is nil, and if not, then put it in the dropdown button as <li> %>
              <% if !@alldonet_product_desc['wsc'][@stat_level][key].nil? and !@alldonet_product_desc['wsc'][@stat_level][key]['$keys'].nil? %>
                <% @alldonet_product_desc['wsc'][@stat_level][key]['$keys'].each do |key2| %>
                  <li class="dropdown-submenu">
                    <%= content_tag :a, tabindex: "-1", href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_value", onclick: "edit_value('#{@product_key}', '#{@stat_level}.#{key}.#{key2}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}', '#{@alldonet_product_desc['wsc'][@stat_level][key][key2]['$value']}', '#{key2.to_s.humanize}')" do %>
                      <%= key2.to_s.humanize %>
                    <% end %>
                    <ul class="dropdown-menu">
<%############################### Begin level 3 submenu ####################%>
                      <%# checking to see if $keys is nil, and if not, then put it in the dropdown button as <li> %>
                      <% if !@alldonet_product_desc['wsc'][@stat_level][key][key2].nil? and !@alldonet_product_desc['wsc'][@stat_level][key][key2]['$keys'].nil? %>
                        <% @alldonet_product_desc['wsc'][@stat_level][key][key2]['$keys'].each do |key3| %>
                          <li>
                            <%= content_tag :a, tabindex: "-1", href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_value", onclick: "edit_value('#{@product_key}', '#{@stat_level}.#{key}.#{key2}.#{key3}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}', '#{@alldonet_product_desc['wsc'][@stat_level][key][key2][key3]['$value']}', '#{key3.to_s.humanize}')" do %>
                              <%= key3.to_s.humanize %>
                            <% end %>
                          </li>
                          <%# Checking to see if $value is present, put it in the dropdown menu as <li> %>
                          <% if @alldonet_product_desc['wsc'][@stat_level][key][key2][key3]['$value'].present? %>
                            <% key4 = @alldonet_product_desc['wsc'][@stat_level][key][key2][key3]['$value'] %>
                            <li>
                              <p tabindex="-1" href="#">
                                <%= key4.to_s.humanize[0..30] %><%= "..." if key4.to_s.humanize.length > 30 %>
                              </p>
                            </li>
                          <% end %>
                        <% end %>
                      <% end %>
                      <li>
                        <%# Button to add new item %>
                        <%= content_tag :a, href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_item", onclick: "edit('#{@product_key}', '#{@stat_level}.#{key}.#{key2}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}')" do %>
                          Add new item
                        <% end %>
                      </li>
<%############################### End level 3 submenu and back to level 2 ####################%>
                    </ul>
                  </li>
                  <%# Checking to see if $value is present, put it in the dropdown menu as <li> %>
                  <% if @alldonet_product_desc['wsc'][@stat_level][key][key2]['$value'].present? %>
                    <% key3 = @alldonet_product_desc['wsc'][@stat_level][key][key2]['$value'] %>
                    <li>
                      <p tabindex="-1" href="#">
                        <%= key3.to_s.humanize[0..30] %><%= "..." if key3.to_s.humanize.length > 30 %>
                      </p>
                    </li>
                  <% end %>
                <% end %>
              <% end %>  
              <li>
                <%# Button to add new item %>
                <%= content_tag :a, href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_item", onclick: "edit('#{@product_key}', '#{@stat_level}.#{key}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}')" do %> 
                  Add new item
                <% end %>
              </li>
<%############################### End level 2 submenu and back to level 1 ####################%>                
            </ul>
          </li>
          <%# Checking to see if $value is present, put it in the dropdown menu as <li> %>
          <% if @alldonet_product_desc['wsc'][@stat_level][key]['$value'].present? %>
            <% key2 = @alldonet_product_desc['wsc'][@stat_level][key]['$value'] %>
            <li>
              <p tabindex="-1" href="#">
                <%= key2.to_s.humanize[0..30] %><%= "..." if key2.to_s.humanize.length > 30 %>
              </p>
            </li>
          <% end %>
        <% end %>
      <% end %>
      <li>
        <%# Button to add new item %>
        <%= content_tag :a, href: "#", :'data-toggle' => "modal", :'data-target' => "#modal_add_item", onclick: "edit('#{@product_key}', '#{@stat_level}', '#{current_user.first_name}', '#{@alldonet_product_desc['pn']}')" do %>
          Add new item
        <% end %>
      </li>
<%########################## End level 1 dropdown ###################%>      
    </ul>
<%########################## End Dropdown ###########################################%>
  </div>



